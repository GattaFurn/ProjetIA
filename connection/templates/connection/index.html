{% load static %} <!--Génère l'url absolue des fichiers statiques-->
<!DOCTYPE html> 
<html>
	<head>
		<meta charset="utf-8">
		<title>Cub-e  Connection</title>
		<style type="text/css">
			*{
				Font-family: Blippo, fantasy;
			}
			body{
				background-color: #C0392B;
			}
			.connect_form{
				width: 400px;
				display: inline;
				opacity : 0;
			}
			.connect_form h2{
				font-size: 30px;
				text-align: center;
			}
			#connect_div{
				display: flex;
				justify-content: space-around;
				width: 1400px;
				text-align: center;
				margin : 0px auto;
			}
			#connect_title{
				text-align: center;
				margin-top: 40px;
				margin-bottom: 40px;
				animation: fadein 1.3s;
				font-size: 70px;
			}
			form{
				height : 550px;
				background-color: #CD6155;
				border-radius: 20px;
			}
			@keyframes zoom{
				from{
					-webkit-transform: scale(1);
				}
				to{
					-webkit-transform: scale(1.05);
				}
			}
			.zoom:hover{
				animation: zoom 0.25s;
				-webkit-transform: scale(1.05);
			}
			
			form div{
				margin-top: 10px;
			}
			label{
				display: inline-block;
				width: 400px;
				text-align: center;
				font-size: 24px;
				margin-bottom: 15px;
				
			}
			input, textarea, select{
				height : 50px;
				width: 280px;
				box-sizing: content-box;
				border: none;
				border-radius: 7px;
				background-color:#D98880;
			}
			input:focus, textarea:focus{
				outline: none;
			}
			select:focus{
				outline: none;
				border-radius: 7px 7px 0px 0px;
			}
			button{
				font-size: 36px;
				height: 120px;
				width : 300px;
				padding: 5px;
				background-color: #28B463;
				border : none;
				border-radius: 10px;;
				position : relative;
			}
			@keyframes animButton{
				from{
					-webkit-transform: scale(1);
				}
				to{
					-webkit-transform: scale(1.10);
				}
			}
			option:disabled{
				background-color: black;
			}
			.aniBut:hover{
				animation: animButton 0.25s;
				-webkit-transform: scale(1.10);
			}
			#signIn{
				top : 130px;
			}
			#signUp{
				top : 25px;
			}
			#choose{
				top : 235px;
			}
			
			.connect_valid{
				margin-top: 50px;
				height: 230px;
			}
			.div_form p{
				height: 60px;
				padding-top : 30px
			}
			@keyframes fadein{
				from{
					opacity: 0;
				}
				to{
					opacity: 1;
				}
			}
			.fade{
				animation: fadein 1s;
			}

		</style>
		<script type="text/javascript">
			let COLOR_CHOICES = new Map();
    			COLOR_CHOICES.set('BL', '#0099ff');
    			COLOR_CHOICES.set('PK', '#ff99ff');
    			COLOR_CHOICES.set('YW', '#ffcc66');
    			COLOR_CHOICES.set('GN', '#80ff80');
    			COLOR_CHOICES.set('VT', '#bf80ff');
    			COLOR_CHOICES.set('RD', '#b30000');
    			COLOR_CHOICES.set('OE', '#ff8c1a');
    			COLOR_CHOICES.set('CN', '#80ffff');

			function fadeIn(){
				let divs = document.getElementsByClassName("connect_form");
				let time = 70;
				for(let div of divs){
					setTimeout(function(){div.classList.add("fade")}, time);
					setTimeout(function(){div.style.opacity = 1;}, time);
					time += 400;
				}
			}
			
			function colorChoice(){
				let listOptions = document.getElementsByTagName("option");
				for (let elem of listOptions){
					for(let [key, value] of COLOR_CHOICES){
						if(elem.value == key)
							elem.style.backgroundColor = value;
					}
					
				}
			}

			window.onload = function(){
				fadeIn();
				colorChoice();
				let forms = document.getElementsByTagName("form");
				for(let form of forms){
					form.classList.add("zoom");
				}
			}
			
		</script>
	</head>
  <body>
	  <script type="text/javascript">
			var received_data = "{{ data|safe }}";
			if(received_data != "")
				alert(received_data);
			
	  </script>
	<h1 id="connect_title">Welcome to Cub-e</h1>

    <div id="connect_div">
	    
	    <div class="connect_form">
	    	<h2>Connect you to join the game</h2>
			<form method="POST" action="/connection/"> <!--Action : url vers lequel les données doivent être envoyée-->
				{% csrf_token %} <!--protection contre certaines actions malveillantes-->
				<div class="div_form">
					{{formPlayer.as_p}} <!--recupere la variable form--> 
				</div>
		    	<div class="connect_valid">
		    		<button type="submit" id="signIn" class="aniBut">Sign in</button>
		    	</div>
		    </form>
	    </div>
	    
	    <div class="connect_form">
	    	<h2>New player, register you</h2>
			<form method="POST" action="/connection/">
				{% csrf_token %} <!--protection contre certaines actions malveillantes-->
				<div class="div_form">
					{{formNewPlayer.as_p }}
				</div>
		    	<div class="connect_valid">
		    		<button id="signUp" type="submit" class="aniBut">Sign up</button>
		    	</div>
	    	</form>
	    </div>

		<div class="connect_form">
	    	<h2>Wanna play against an IA</h2>
			<form method="POST" action="/connection/">
				{% csrf_token %} <!--protection contre certaines actions malveillantes-->
				<div class="div_form">
					{{formIA.as_p}}
				</div>
		    	<div class="connect_valid">
		    		<button id="choose" type="submit" class="aniBut">Choose</button>
		    	</div>
	    	</form>
	    </div>
    </div>
  </body>
</html>