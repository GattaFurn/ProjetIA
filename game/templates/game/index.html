{% load static %}
<!DOCTYPE html>
<html>
<head>
	<title>Your profile</title>
	<meta charset="utf-8">
	<style type="text/css">
		#profile_title{
			text-align: center;
			margin-top: 40px;
			margin-bottom: 80px;

		}
		#disconnection{
			position: absolute;
			margin-top: 0px;
			margin-left: 1590px;
		}
		.connect_form{
				width: 500px;
				display: inline;
				
		}
    #connect_div{
      display: flex;
      justify-content: space-around;
      width: 1400px;
      text-align: center;
      margin : 0px auto;
    }
    #connect_title{
      text-align: center;
      margin-top: 40px;
      margin-bottom: 80px;
    }
    form{
      border : 1px solid black;
      border-radius: 10px;
    }
    form div{
      margin-top: 10px;
    }
    label{
      display: inline-block;
      width: 130px;
      text-align: left;
    }
    input, textarea, select{
      width: 300px;
      box-sizing: border-box;
      border: 1px solid black;
    }
    button{
      padding: 5px;
      margin-bottom: 10px;
      margin-right: 32px;
    }
    .connect_valid{
      display: flex;
      justify-content: flex-end;
    }
    #newGameButton{
      font-size: 40px;
      padding : 10px;
      margin-top: 50px;
      text-align: center;
      margin-left: auto;
      margin-right: auto;
    }
	</style>
    {{ player1|json_script:"player1" }}
    {{ player2|json_script:"player2" }}
    <script>
      const player1 = JSON.parse(document.getElementById('player1').textContent);
      const player2 = JSON.parse(document.getElementById('player2').textContent);
    </script>
    <script>
    let COLOR_CHOICES = new Map();
    COLOR_CHOICES.set("BL", "Blue");
    COLOR_CHOICES.set("PK", "Pink");
    COLOR_CHOICES.set('YW', 'Yellow');
    COLOR_CHOICES.set('GN', 'Green');
    COLOR_CHOICES.set('VT', 'Violet');
    COLOR_CHOICES.set('RD', 'Red');
    COLOR_CHOICES.set('OE', 'Orange');
    COLOR_CHOICES.set('CN', 'Cyan');
      function createDiv(){
        let div = document.getElementById("connect_div");
        let button = document.createElement("button");
        button.append(document.createElement("a"));
        button.childNodes[0].href = "/connection";
        button.childNodes[0].innerHTML = "Connection";
        let h2;
        let p = [];
        let div_player = [];
        let ind = 0;
        for(player of [player1,player2]){
          div_player[ind] = document.createElement("div");
          div_player[ind].className = "connect_form";
          h2 = document.createElement("h2");
          h2.innerHTML = "Player "+(ind+1);
          div_player[ind].append(h2);
          if(player == null){
            div_player[ind].append(button); 
          }else{
            p[0] = document.createElement("p");
            p[0].innerHTML = "Player name: "+player.username;
            p[1] = document.createElement("p");
            p[1].innerHTML = "Player color: "+COLOR_CHOICES.get(player.color);
           div_player[ind].append(p[0],p[1]);
          }
          ind++;
        }
        div.append(div_player[0]);
        div.append(div_player[1]);
      }

      window.onload = createDiv;
    </script
    
</head>
<body>
    <button id="disconnection"><a href = "../connection/deconnection"> Disconnection</a></button>
    <div id="profile_title">
      <h1>Welcome Back User</h1>
    </div>
      <div id="connect_div">
      </div>
    <form method="POST" action="/game/">
      {% csrf_token %}
      {{form}}
      <br>
    <input type="submit"/>
  </form>
</body>
</html>